{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/kouros/Code/SSR/pages/Welcome.js\";\nimport React, { Component } from \"react\";\nimport Menu from \"../components/menu/Menu.jsx\";\nimport Footer from \"../components/menu/Footer.jsx\";\nimport API from \"../API.js\";\nimport Router from \"next/router\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\n\nvar welcome =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(welcome, _Component);\n\n  function welcome(props) {\n    var _this;\n\n    _classCallCheck(this, welcome);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(welcome).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSignin\", function () {\n      if (localStorage.getItem(\"jwt\")) {\n        var profile = _this.API.getProfile();\n\n        if (profile.type === \"0\") Router.push(\"/user\");else if (profile.type === \"1\") Router.push(\"/profile\");\n      }\n\n      var re = /\\S+@\\S+\\.\\S+/;\n\n      if (!re.test(String(_this.state.loginEmail).toLowerCase())) {\n        if (_this.state.loginEmail === \"\") _this.setState({\n          signinEmailMessage: \" Provide an email.\"\n        });else _this.setState({\n          signinEmailMessage: \"It is not a valid email.\"\n        });\n      } else {\n        _this.setState({\n          signinEmailMessage: \"\"\n        });\n\n        if (_this.state.loginPass.length < 6) {\n          _this.setState({\n            signinMessage: \" Password is at least 6 character.\"\n          });\n        } else {\n          _this.setState({\n            signinMessage: \"\"\n          });\n\n          _this.API.login(_this.state.loginEmail, _this.state.loginPass).then(function (res) {\n            if (localStorage.getItem(\"jwt\")) {\n              var _profile = _this.API.getProfile();\n\n              if (_profile.type === \"0\") _this.props.history.replace(\"/\");else _this.props.history.replace(\"/profile\");\n            } else {\n              NotificationManager.info(\"Wrong email or password. Try again.\");\n\n              _this.setState({\n                signinMessage: \"wrong user or password.\"\n              });\n            }\n          });\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSignup\", function () {\n      if (_this.validateForm()) _this.API.register(_this.state.user, _this.state.email, _this.state.pass, _this.state.businessUser).then(function (res) {\n        console.log(\"res\", res);\n        if (res.data.message === \"User exist\") _this.setState({\n          emailMessage: \"\",\n          userMessage: \"The username already taken.\"\n        });else if (res.data.message === \"Email exist\") _this.setState({\n          userMessage: \"\",\n          emailMessage: \"The email is already registered. \"\n        });else if (res.data.message === \"User was created.\") {\n          NotificationManager.info(\"Successfully register. Sign in to your account.\");\n\n          _this.setState({\n            signinState: true,\n            loginEmail: _this.state.email,\n            loginPass: _this.state.pass\n          });\n        } else {\n          alert(\"Something goes wrong.\");\n        }\n      });else NotificationManager.info(\"Fill all required fields.\", null, 2000);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function () {\n      _this.setState({\n        signinState: !_this.state.signinState,\n        user: \"\",\n        email: \"\",\n        pass: \"\",\n        signinMessage: \"\",\n        emailMessage: \"\",\n        userMessage: \"\",\n        pass2: \"\",\n        loginPass: \"\",\n        passMessage: \"\",\n        passMessage2: \"\",\n        businessUser: false\n      }, function () {\n        var _loop = function _loop(x) {\n          _this.refs[x].onkeypress = function (event) {\n            return _this._handleKeyPress(event, x);\n          };\n        };\n\n        for (var x in _this.refs) {\n          _loop(x);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBussinessClick\", function () {\n      _this.setState({\n        businessUser: !_this.state.businessUser,\n        signinState: false,\n        user: \"\",\n        email: \"\",\n        pass: \"\",\n        signinMessage: \"\",\n        emailMessage: \"\",\n        userMessage: \"\",\n        passMessage: \"\",\n        passMessage2: \"\",\n        pass2: \"\",\n        loginPass: \"\"\n      });\n    });\n\n    _this.state = {\n      signinState: true,\n      businessUser: false,\n      loginEmail: \"\",\n      loginPass: \"\",\n      user: \"\",\n      userMessage: \"\",\n      email: \"\",\n      pass: \"\",\n      pass2: \"\",\n      signinMessage: \"\",\n      signinEmailMessage: \"\",\n      emailMessage: \"\",\n      passMessage: \"\",\n      passMessage2: \"\"\n    };\n    _this.handleChangeUser = _this.handleChangeUser.bind(_assertThisInitialized(_this));\n    _this.handleChangePass = _this.handleChangePass.bind(_assertThisInitialized(_this));\n    _this.handleChangePass2 = _this.handleChangePass2.bind(_assertThisInitialized(_this));\n    _this.handleChangeEmail = _this.handleChangeEmail.bind(_assertThisInitialized(_this));\n    _this.handleSignin = _this.handleSignin.bind(_assertThisInitialized(_this));\n    _this.handleSignup = _this.handleSignup.bind(_assertThisInitialized(_this));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleLoginChangeEmail = _this.handleLoginChangeEmail.bind(_assertThisInitialized(_this));\n    _this.handleLoginChangePass = _this.handleLoginChangePass.bind(_assertThisInitialized(_this));\n    _this._handleKeyPress = _this._handleKeyPress.bind(_assertThisInitialized(_this));\n    _this.validateForm = _this.validateForm.bind(_assertThisInitialized(_this));\n    _this.API = new API();\n    return _this;\n  }\n\n  _createClass(welcome, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(\"test\", \"profile\");\n\n      if (localStorage.getItem(\"jwt\")) {\n        var profile = this.API.getProfile();\n        console.log(\"test\", profile);\n        if (profile.type === \"0\") Router.push(\"/\");else if (profile.type === \"1\") Router.push(\"/item\");\n      } // for (let x in this.refs) {\n      //   this.refs[x].onkeypress = event => this._handleKeyPress(event, x);\n      // }\n\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"sas\");\n    }\n  }, {\n    key: \"_handleKeyPress\",\n    value: function _handleKeyPress(e, field) {\n      if (e.keyCode === 13) {\n        if (field === \"1\") this.refs[2].focus();else if (field === \"2\") this.handleSignin();else if (field === \"3\") this.refs[4].focus();else if (field === \"4\") this.refs[5].focus();else if (field === \"5\") this.refs[6].focus();else if (field === \"6\") this.handleSignup();\n      }\n    }\n  }, {\n    key: \"handleChangeUser\",\n    value: function handleChangeUser(event) {\n      this.setState({\n        user: event.target.value\n      });\n\n      if (event.target.value === \"\") {\n        this.setState({\n          userMessage: \"Provide an username.\"\n        });\n      }\n\n      if (event.target.value.length < 4) {\n        this.setState({\n          userMessage: \"It should be minimum 4 characters.\"\n        });\n      } else this.setState({\n        userMessage: \"\"\n      });\n    }\n  }, {\n    key: \"handleLoginChangePass\",\n    value: function handleLoginChangePass(event) {\n      this.setState({\n        loginPass: event.target.value\n      });\n      if (this.state.loginPass.length > 5) this.setState({\n        signinMessage: \"\"\n      });\n    }\n  }, {\n    key: \"handleChangePass\",\n    value: function handleChangePass(event) {\n      var _this2 = this;\n\n      this.setState({\n        pass: event.target.value\n      }, function () {\n        return _this2.validateForm();\n      });\n    }\n  }, {\n    key: \"handleChangePass2\",\n    value: function handleChangePass2(event) {\n      var _this3 = this;\n\n      this.setState({\n        pass2: event.target.value\n      }, function () {\n        return _this3.validateForm();\n      });\n\n      if (this.state.pass === event.target.value) {\n        this.setState({\n          passMessage2: \"\"\n        });\n      }\n    }\n  }, {\n    key: \"handleLoginChangeEmail\",\n    value: function handleLoginChangeEmail(event) {\n      this.setState({\n        loginEmail: event.target.value\n      });\n      var re = /\\S+@\\S+\\.\\S+/;\n      if (re.test(String(event.target.value).toLowerCase())) this.setState({\n        signinEmailMessage: \"\"\n      });\n    }\n  }, {\n    key: \"handleChangeEmail\",\n    value: function handleChangeEmail(event) {\n      var re = /\\S+@\\S+\\.\\S+/;\n      this.setState({\n        email: event.target.value\n      });\n\n      if (!re.test(String(event.target.value).toLowerCase())) {\n        if (event.target.value === \"\") {\n          this.setState({\n            emailMessage: \"Provide an email.\"\n          });\n        } else {\n          this.setState({\n            emailMessage: \"It is not valid email.\"\n          });\n        }\n      } else this.setState({\n        emailMessage: \"\"\n      });\n    }\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      var re = /\\S+@\\S+\\.\\S+/;\n\n      if (this.state.user === \"\") {\n        this.setState({\n          userMessage: \" Provide an username\"\n        });\n      } else if (!re.test(String(this.state.email).toLowerCase())) {\n        if (this.state.email === \"\") {\n          this.setState({\n            emailMessage: \" Provide an email\"\n          });\n        } else {\n          this.setState({\n            emailMessage: \" Email is not valid email\"\n          });\n        }\n      } else if (this.state.pass === \"\") {\n        this.setState({\n          emailMessage: \"\",\n          passMessage: \"Provide a password \"\n        });\n      } else if (this.state.pass.length < 6) {\n        this.setState({\n          emailMessage: \"\",\n          passMessage: \"at least 6 characters\"\n        });\n      } else if (this.state.pass !== this.state.pass2) {\n        this.setState({\n          passMessage: \"\",\n          passMessage2: \"Passwords doesnt Match\"\n        });\n      } else return true;\n\n      return false;\n    }\n  }]);\n\n  return welcome;\n}(Component);\n\nexport default welcome;","map":{"version":3,"sources":["/Users/kouros/Code/SSR/pages/Welcome.js"],"names":["React","Component","Menu","Footer","API","Router","NotificationContainer","NotificationManager","welcome","props","localStorage","getItem","profile","getProfile","type","push","re","test","String","state","loginEmail","toLowerCase","setState","signinEmailMessage","loginPass","length","signinMessage","login","then","res","history","replace","info","validateForm","register","user","email","pass","businessUser","console","log","data","message","emailMessage","userMessage","signinState","alert","pass2","passMessage","passMessage2","x","refs","onkeypress","event","_handleKeyPress","handleChangeUser","bind","handleChangePass","handleChangePass2","handleChangeEmail","handleSignin","handleSignup","handleClick","handleLoginChangeEmail","handleLoginChangePass","e","field","keyCode","focus","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Menu from \"../components/menu/Menu.jsx\";\nimport Footer from \"../components/menu/Footer.jsx\";\nimport API from \"../API.js\";\nimport Router from \"next/router\";\n\nimport {\n  NotificationContainer,\n  NotificationManager\n} from \"react-notifications\";\n\nclass welcome extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      signinState: true,\n      businessUser: false,\n      loginEmail: \"\",\n      loginPass: \"\",\n      user: \"\",\n      userMessage: \"\",\n      email: \"\",\n      pass: \"\",\n      pass2: \"\",\n      signinMessage: \"\",\n      signinEmailMessage: \"\",\n      emailMessage: \"\",\n      passMessage: \"\",\n      passMessage2: \"\"\n    };\n    this.handleChangeUser = this.handleChangeUser.bind(this);\n    this.handleChangePass = this.handleChangePass.bind(this);\n    this.handleChangePass2 = this.handleChangePass2.bind(this);\n    this.handleChangeEmail = this.handleChangeEmail.bind(this);\n    this.handleSignin = this.handleSignin.bind(this);\n    this.handleSignup = this.handleSignup.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleLoginChangeEmail = this.handleLoginChangeEmail.bind(this);\n    this.handleLoginChangePass = this.handleLoginChangePass.bind(this);\n    this._handleKeyPress = this._handleKeyPress.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n    this.API = new API();\n  }\n\n  componentDidMount() {\n    console.log(\"test\", \"profile\");\n\n    if (localStorage.getItem(\"jwt\")) {\n      let profile = this.API.getProfile();\n      console.log(\"test\", profile);\n      if (profile.type === \"0\") Router.push(\"/\");\n      else if (profile.type === \"1\") Router.push(\"/item\");\n    }\n\n    // for (let x in this.refs) {\n    //   this.refs[x].onkeypress = event => this._handleKeyPress(event, x);\n    // }\n  }\n\n  render() {\n    return <div>sas</div>;\n  }\n\n  _handleKeyPress(e, field) {\n    if (e.keyCode === 13) {\n      if (field === \"1\") this.refs[2].focus();\n      else if (field === \"2\") this.handleSignin();\n      else if (field === \"3\") this.refs[4].focus();\n      else if (field === \"4\") this.refs[5].focus();\n      else if (field === \"5\") this.refs[6].focus();\n      else if (field === \"6\") this.handleSignup();\n    }\n  }\n  handleSignin = () => {\n    if (localStorage.getItem(\"jwt\")) {\n      let profile = this.API.getProfile();\n      if (profile.type === \"0\") Router.push(\"/user\");\n      else if (profile.type === \"1\") Router.push(\"/profile\");\n    }\n    var re = /\\S+@\\S+\\.\\S+/;\n    if (!re.test(String(this.state.loginEmail).toLowerCase())) {\n      if (this.state.loginEmail === \"\")\n        this.setState({ signinEmailMessage: \" Provide an email.\" });\n      else this.setState({ signinEmailMessage: \"It is not a valid email.\" });\n    } else {\n      this.setState({ signinEmailMessage: \"\" });\n\n      if (this.state.loginPass.length < 6) {\n        this.setState({ signinMessage: \" Password is at least 6 character.\" });\n      } else {\n        this.setState({ signinMessage: \"\" });\n\n        this.API.login(this.state.loginEmail, this.state.loginPass).then(\n          res => {\n            if (localStorage.getItem(\"jwt\")) {\n              let profile = this.API.getProfile();\n              if (profile.type === \"0\") this.props.history.replace(\"/\");\n              else this.props.history.replace(\"/profile\");\n            } else {\n              NotificationManager.info(\"Wrong email or password. Try again.\");\n              this.setState({ signinMessage: \"wrong user or password.\" });\n            }\n          }\n        );\n      }\n    }\n  };\n\n  handleSignup = () => {\n    if (this.validateForm())\n      this.API.register(\n        this.state.user,\n        this.state.email,\n        this.state.pass,\n        this.state.businessUser\n      ).then(res => {\n        console.log(\"res\", res);\n        if (res.data.message === \"User exist\")\n          this.setState({\n            emailMessage: \"\",\n            userMessage: \"The username already taken.\"\n          });\n        else if (res.data.message === \"Email exist\")\n          this.setState({\n            userMessage: \"\",\n            emailMessage: \"The email is already registered. \"\n          });\n        else if (res.data.message === \"User was created.\") {\n          NotificationManager.info(\n            \"Successfully register. Sign in to your account.\"\n          );\n          this.setState({\n            signinState: true,\n            loginEmail: this.state.email,\n            loginPass: this.state.pass\n          });\n        } else {\n          alert(\"Something goes wrong.\");\n        }\n      });\n    else NotificationManager.info(\"Fill all required fields.\", null, 2000);\n  };\n\n  handleChangeUser(event) {\n    this.setState({ user: event.target.value });\n    if (event.target.value === \"\") {\n      this.setState({ userMessage: \"Provide an username.\" });\n    }\n    if (event.target.value.length < 4) {\n      this.setState({ userMessage: \"It should be minimum 4 characters.\" });\n    } else this.setState({ userMessage: \"\" });\n  }\n\n  handleLoginChangePass(event) {\n    this.setState({ loginPass: event.target.value });\n    if (this.state.loginPass.length > 5) this.setState({ signinMessage: \"\" });\n  }\n\n  handleChangePass(event) {\n    this.setState({ pass: event.target.value }, () => this.validateForm());\n  }\n\n  handleChangePass2(event) {\n    this.setState({ pass2: event.target.value }, () => this.validateForm());\n    if (this.state.pass === event.target.value) {\n      this.setState({\n        passMessage2: \"\"\n      });\n    }\n  }\n\n  handleLoginChangeEmail(event) {\n    this.setState({ loginEmail: event.target.value });\n    var re = /\\S+@\\S+\\.\\S+/;\n    if (re.test(String(event.target.value).toLowerCase()))\n      this.setState({\n        signinEmailMessage: \"\"\n      });\n  }\n\n  handleChangeEmail(event) {\n    var re = /\\S+@\\S+\\.\\S+/;\n    this.setState({ email: event.target.value });\n    if (!re.test(String(event.target.value).toLowerCase())) {\n      if (event.target.value === \"\") {\n        this.setState({ emailMessage: \"Provide an email.\" });\n      } else {\n        this.setState({\n          emailMessage: \"It is not valid email.\"\n        });\n      }\n    } else\n      this.setState({\n        emailMessage: \"\"\n      });\n  }\n\n  handleClick = () => {\n    this.setState(\n      {\n        signinState: !this.state.signinState,\n        user: \"\",\n        email: \"\",\n        pass: \"\",\n        signinMessage: \"\",\n        emailMessage: \"\",\n        userMessage: \"\",\n        pass2: \"\",\n        loginPass: \"\",\n        passMessage: \"\",\n        passMessage2: \"\",\n        businessUser: false\n      },\n      () => {\n        for (let x in this.refs) {\n          this.refs[x].onkeypress = event => this._handleKeyPress(event, x);\n        }\n      }\n    );\n  };\n\n  handleBussinessClick = () => {\n    this.setState({\n      businessUser: !this.state.businessUser,\n      signinState: false,\n      user: \"\",\n      email: \"\",\n      pass: \"\",\n      signinMessage: \"\",\n      emailMessage: \"\",\n      userMessage: \"\",\n      passMessage: \"\",\n      passMessage2: \"\",\n      pass2: \"\",\n      loginPass: \"\"\n    });\n  };\n\n  validateForm() {\n    var re = /\\S+@\\S+\\.\\S+/;\n    if (this.state.user === \"\") {\n      this.setState({ userMessage: \" Provide an username\" });\n    } else if (!re.test(String(this.state.email).toLowerCase())) {\n      if (this.state.email === \"\") {\n        this.setState({ emailMessage: \" Provide an email\" });\n      } else {\n        this.setState({\n          emailMessage: \" Email is not valid email\"\n        });\n      }\n    } else if (this.state.pass === \"\") {\n      this.setState({ emailMessage: \"\", passMessage: \"Provide a password \" });\n    } else if (this.state.pass.length < 6) {\n      this.setState({\n        emailMessage: \"\",\n        passMessage: \"at least 6 characters\"\n      });\n    } else if (this.state.pass !== this.state.pass2) {\n      this.setState({\n        passMessage: \"\",\n        passMessage2: \"Passwords doesnt Match\"\n      });\n    } else return true;\n    return false;\n  }\n}\n\nexport default welcome;\n"]},"metadata":{},"sourceType":"module"}