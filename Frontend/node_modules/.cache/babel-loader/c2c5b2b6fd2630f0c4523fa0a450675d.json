{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/kouros/Code/SSR/components/homepage/Cards.jsx\";\nimport React, { Component } from \"react\";\nimport Card from \"./Card\"; //import API from \"../../Service/API\";\n\nvar Cards =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Cards, _Component);\n\n  function Cards(props) {\n    var _this;\n\n    _classCallCheck(this, Cards);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Cards).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleScroll\", function (e) {//let bottom = e.target;\n      //bottom = window.scrollY;\n      // bottom = document.documentElement.scrollHeight;\n    });\n\n    _this.state = {\n      data: []\n    };\n    _this.handleScroll = _this.handleScroll.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Cards, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.API = new API();\n      this.API.getAllItems().then(function (res) {\n        _this2.APIData = res.items;\n\n        _this2.setState({\n          data: res.items\n        });\n\n        window.addEventListener(\"scroll\", _this2.handleScroll);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      {\n        this.props.data.items[1].company;\n      }\n      var categoryData = [];\n      var filteredData = [];\n      var items = this.props.data;\n      if (this.props.category !== \"All Deals\") categoryData = items.filter(function (i) {\n        return i.category === _this3.props.category;\n      });else categoryData = items;\n\n      if (this.props.subcategory) {\n        var tobefilterditems = categoryData;\n\n        if (this.props.subcategory === \"Price\") {\n          filteredData = [].concat(categoryData).sort(function (a, b) {\n            return a.dprice - b.dprice;\n          }).map(function (item, i) {\n            return item;\n          });\n        } else if (this.props.subcategory === \"Discount\") {\n          filteredData = [].concat(categoryData).sort(function (a, b) {\n            return b.discount - a.discount;\n          }).map(function (item, i) {\n            return item;\n          });\n        } else if (this.props.subcategory === \"NewDeals\") {\n          filteredData = categoryData;\n        } else if (this.props.subcategory === \"Featured\") {\n          filteredData = [].concat(categoryData).sort(function (a, b) {\n            return b.discount - a.discount;\n          }).map(function (item, i) {\n            return item;\n          });\n        } else {\n          filteredData = tobefilterditems.filter(function (i) {\n            return i.subcategory === _this3.props.subcategory;\n          });\n        }\n      } else filteredData = categoryData;\n\n      return React.createElement(\"div\", {\n        className: \"row\",\n        onScroll: function onScroll() {\n          _this3.handleScroll();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, //this.state.data\n      filteredData.map(function (item, index) {\n        return {\n          /* <Card\n            key={index}\n            id={item.companyid}\n            compnay={item.company}\n            imageurl={item.imageurl}\n            description={item.description}\n            price={item.price}\n            dprice={item.dprice}\n          /> */\n        };\n      }));\n    }\n  }, {\n    key: \"compare\",\n    value: function compare(a, b) {\n      var genreA = a.genre.toUpperCase();\n      var genreB = b.genre.toUpperCase();\n      var comparison = 0;\n\n      if (genreA > genreB) {\n        comparison = 1;\n      } else if (genreA < genreB) {\n        comparison = -1;\n      }\n\n      return comparison;\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"http://localhost/Backend/API/getallitems.php\");\n\n              case 2:\n                res = _context.sent;\n                // this.setState(res);\n                console.log(\"test\", res);\n                return _context.abrupt(\"return\", {\n                  data: res.data.items\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps() {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Cards;\n}(Component);\n\nexport default Cards;","map":{"version":3,"sources":["/Users/kouros/Code/SSR/components/homepage/Cards.jsx"],"names":["React","Component","Card","Cards","props","e","state","data","handleScroll","bind","API","getAllItems","then","res","APIData","items","setState","window","addEventListener","removeEventListener","company","categoryData","filteredData","category","filter","i","subcategory","tobefilterditems","concat","sort","a","b","dprice","map","item","discount","index","genreA","genre","toUpperCase","genreB","comparison","axios","get","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Card from \"./Card\";\n//import API from \"../../Service/API\";\n\nclass Cards extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  static async getInitialProps() {\n    const res = await axios.get(\"http://localhost/Backend/API/getallitems.php\");\n    // this.setState(res);\n    console.log(\"test\", res);\n    return { data: res.data.items };\n  }\n\n  componentDidMount() {\n    this.API = new API();\n    this.API.getAllItems().then(res => {\n      this.APIData = res.items;\n      this.setState({ data: res.items });\n      window.addEventListener(\"scroll\", this.handleScroll);\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  render() {\n    {\n      this.props.data.items[1].company;\n    }\n\n    var categoryData = [];\n    var filteredData = [];\n    var items = this.props.data;\n\n    if (this.props.category !== \"All Deals\")\n      categoryData = items.filter(i => i.category === this.props.category);\n    else categoryData = items;\n\n    if (this.props.subcategory) {\n      let tobefilterditems = categoryData;\n\n      if (this.props.subcategory === \"Price\") {\n        filteredData = []\n          .concat(categoryData)\n          .sort((a, b) => a.dprice - b.dprice)\n          .map((item, i) => {\n            return item;\n          });\n      } else if (this.props.subcategory === \"Discount\") {\n        filteredData = []\n          .concat(categoryData)\n          .sort((a, b) => b.discount - a.discount)\n          .map((item, i) => {\n            return item;\n          });\n      } else if (this.props.subcategory === \"NewDeals\") {\n        filteredData = categoryData;\n      } else if (this.props.subcategory === \"Featured\") {\n        filteredData = []\n          .concat(categoryData)\n          .sort((a, b) => b.discount - a.discount)\n          .map((item, i) => {\n            return item;\n          });\n      } else {\n        filteredData = tobefilterditems.filter(\n          i => i.subcategory === this.props.subcategory\n        );\n      }\n    } else filteredData = categoryData;\n\n    return (\n      <div\n        className=\"row\"\n        onScroll={() => {\n          this.handleScroll();\n        }}\n      >\n        {//this.state.data\n        filteredData.map(function(item, index) {\n          return {\n            /* <Card\n              key={index}\n              id={item.companyid}\n              compnay={item.company}\n              imageurl={item.imageurl}\n              description={item.description}\n              price={item.price}\n              dprice={item.dprice}\n            /> */\n          };\n        })}\n      </div>\n    );\n  }\n\n  handleScroll = e => {\n    //let bottom = e.target;\n    //bottom = window.scrollY;\n    // bottom = document.documentElement.scrollHeight;\n  };\n\n  compare(a, b) {\n    const genreA = a.genre.toUpperCase();\n    const genreB = b.genre.toUpperCase();\n    let comparison = 0;\n    if (genreA > genreB) {\n      comparison = 1;\n    } else if (genreA < genreB) {\n      comparison = -1;\n    }\n    return comparison;\n  }\n}\nexport default Cards;\n"]},"metadata":{},"sourceType":"module"}